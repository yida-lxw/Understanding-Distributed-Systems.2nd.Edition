<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>Understanding Distributed Systems</title>
  <link rel="stylesheet" type="text/css" href="styles/stylesheet1.css" />
</head>
<body epub:type="frontmatter">
<nav epub:type="toc" id="toc"><h1 id="toc-title">Understanding Distributed Systems</h1><ol class="toc"><li id="toc-li-1"><a href="text/ch001.xhtml#understanding-distributed-systems">Understanding Distributed Systems</a></li><li id="toc-li-2"><a href="text/ch002.xhtml#copyright">Copyright</a></li><li id="toc-li-3"><a href="text/ch003.xhtml#about-the-author">About the author</a></li><li id="toc-li-4"><a href="text/ch004.xhtml#acknowledgements">Acknowledgements</a></li><li id="toc-li-5"><a href="text/ch005.xhtml#preface">Preface</a></li><li id="toc-li-6"><a href="text/ch006.xhtml#introduction"><span class="section-header-number">1</span> Introduction</a><ol class="toc"><li id="toc-li-7"><a href="text/ch006.xhtml#communication"><span class="section-header-number">1.1</span> Communication</a></li><li id="toc-li-8"><a href="text/ch006.xhtml#coordination"><span class="section-header-number">1.2</span> Coordination</a></li><li id="toc-li-9"><a href="text/ch006.xhtml#scalability"><span class="section-header-number">1.3</span> Scalability</a></li><li id="toc-li-10"><a href="text/ch006.xhtml#resiliency"><span class="section-header-number">1.4</span> Resiliency</a></li><li id="toc-li-11"><a href="text/ch006.xhtml#maintainability"><span class="section-header-number">1.5</span> Maintainability</a></li><li id="toc-li-12"><a href="text/ch006.xhtml#anatomy-of-a-distributed-system"><span class="section-header-number">1.6</span> Anatomy of a distributed system</a></li></ol></li><li id="toc-li-13"><a href="text/ch007.xhtml#part-communication">(PART) Communication</a></li><li id="toc-li-14"><a href="text/ch008.xhtml#communication-intro">Introduction</a></li><li id="toc-li-15"><a href="text/ch009.xhtml#tcp"><span class="section-header-number">2</span> Reliable links</a><ol class="toc"><li id="toc-li-16"><a href="text/ch009.xhtml#reliability"><span class="section-header-number">2.1</span> Reliability</a></li><li id="toc-li-17"><a href="text/ch009.xhtml#connection-lifecycle"><span class="section-header-number">2.2</span> Connection lifecycle</a></li><li id="toc-li-18"><a href="text/ch009.xhtml#flow-control"><span class="section-header-number">2.3</span> Flow control</a></li><li id="toc-li-19"><a href="text/ch009.xhtml#congestion-control"><span class="section-header-number">2.4</span> Congestion control</a></li><li id="toc-li-20"><a href="text/ch009.xhtml#custom-protocols"><span class="section-header-number">2.5</span> Custom protocols</a></li></ol></li><li id="toc-li-21"><a href="text/ch010.xhtml#tls"><span class="section-header-number">3</span> Secure links</a><ol class="toc"><li id="toc-li-22"><a href="text/ch010.xhtml#encryption"><span class="section-header-number">3.1</span> Encryption</a></li><li id="toc-li-23"><a href="text/ch010.xhtml#authentication"><span class="section-header-number">3.2</span> Authentication</a></li><li id="toc-li-24"><a href="text/ch010.xhtml#integrity"><span class="section-header-number">3.3</span> Integrity</a></li><li id="toc-li-25"><a href="text/ch010.xhtml#handshake"><span class="section-header-number">3.4</span> Handshake</a></li></ol></li><li id="toc-li-26"><a href="text/ch011.xhtml#dns"><span class="section-header-number">4</span> Discovery</a></li><li id="toc-li-27"><a href="text/ch012.xhtml#api"><span class="section-header-number">5</span> APIs</a><ol class="toc"><li id="toc-li-28"><a href="text/ch012.xhtml#http"><span class="section-header-number">5.1</span> HTTP</a></li><li id="toc-li-29"><a href="text/ch012.xhtml#resources"><span class="section-header-number">5.2</span> Resources</a></li><li id="toc-li-30"><a href="text/ch012.xhtml#request-methods"><span class="section-header-number">5.3</span> Request methods</a></li><li id="toc-li-31"><a href="text/ch012.xhtml#response-status-codes"><span class="section-header-number">5.4</span> Response status codes</a></li><li id="toc-li-32"><a href="text/ch012.xhtml#openapi"><span class="section-header-number">5.5</span> OpenAPI</a></li><li id="toc-li-33"><a href="text/ch012.xhtml#evolution"><span class="section-header-number">5.6</span> Evolution</a></li><li id="toc-li-34"><a href="text/ch012.xhtml#idempotency"><span class="section-header-number">5.7</span> Idempotency</a></li></ol></li><li id="toc-li-35"><a href="text/ch013.xhtml#communication-outro">Summary</a></li><li id="toc-li-36"><a href="text/ch014.xhtml#part-coordination">(PART) Coordination</a></li><li id="toc-li-37"><a href="text/ch015.xhtml#coordination-intro">Introduction</a></li><li id="toc-li-38"><a href="text/ch016.xhtml#models"><span class="section-header-number">6</span> System models</a></li><li id="toc-li-39"><a href="text/ch017.xhtml#failure"><span class="section-header-number">7</span> Failure detection</a></li><li id="toc-li-40"><a href="text/ch018.xhtml#time"><span class="section-header-number">8</span> Time</a><ol class="toc"><li id="toc-li-41"><a href="text/ch018.xhtml#physical-clocks"><span class="section-header-number">8.1</span> Physical clocks</a></li><li id="toc-li-42"><a href="text/ch018.xhtml#logical-clocks"><span class="section-header-number">8.2</span> Logical clocks</a></li><li id="toc-li-43"><a href="text/ch018.xhtml#vector-clocks"><span class="section-header-number">8.3</span> Vector clocks</a></li></ol></li><li id="toc-li-44"><a href="text/ch019.xhtml#leader"><span class="section-header-number">9</span> Leader election</a><ol class="toc"><li id="toc-li-45"><a href="text/ch019.xhtml#raft-leader-election"><span class="section-header-number">9.1</span> Raft leader election</a></li><li id="toc-li-46"><a href="text/ch019.xhtml#lease"><span class="section-header-number">9.2</span> Practical considerations</a></li></ol></li><li id="toc-li-47"><a href="text/ch020.xhtml#replication"><span class="section-header-number">10</span> Replication</a><ol class="toc"><li id="toc-li-48"><a href="text/ch020.xhtml#stm"><span class="section-header-number">10.1</span> State machine replication</a></li><li id="toc-li-49"><a href="text/ch020.xhtml#consensus"><span class="section-header-number">10.2</span> Consensus</a></li><li id="toc-li-50"><a href="text/ch020.xhtml#consistency-models"><span class="section-header-number">10.3</span> Consistency models</a><ol class="toc"><li id="toc-li-51"><a href="text/ch020.xhtml#linearizability"><span class="section-header-number">10.3.1</span> Strong consistency</a></li><li id="toc-li-52"><a href="text/ch020.xhtml#sequential-consistency"><span class="section-header-number">10.3.2</span> Sequential consistency</a></li><li id="toc-li-53"><a href="text/ch020.xhtml#eventual-consistency"><span class="section-header-number">10.3.3</span> Eventual consistency</a></li><li id="toc-li-54"><a href="text/ch020.xhtml#the-cap-theorem"><span class="section-header-number">10.3.4</span> The CAP theorem</a></li></ol></li><li id="toc-li-55"><a href="text/ch020.xhtml#chain-replication"><span class="section-header-number">10.4</span> Chain replication</a></li></ol></li><li id="toc-li-56"><a href="text/ch021.xhtml#solvingcap"><span class="section-header-number">11</span> Coordination avoidance</a><ol class="toc"><li id="toc-li-57"><a href="text/ch021.xhtml#broadcast-protocols"><span class="section-header-number">11.1</span> Broadcast protocols</a></li><li id="toc-li-58"><a href="text/ch021.xhtml#crdt"><span class="section-header-number">11.2</span> Conflict-free replicated data types</a></li><li id="toc-li-59"><a href="text/ch021.xhtml#dynamo"><span class="section-header-number">11.3</span> Dynamo-style data stores</a></li><li id="toc-li-60"><a href="text/ch021.xhtml#the-calm-theorem"><span class="section-header-number">11.4</span> The CALM theorem</a></li><li id="toc-li-61"><a href="text/ch021.xhtml#causal-consistency"><span class="section-header-number">11.5</span> Causal consistency</a></li><li id="toc-li-62"><a href="text/ch021.xhtml#practical-considerations"><span class="section-header-number">11.6</span> Practical considerations</a></li></ol></li><li id="toc-li-63"><a href="text/ch022.xhtml#transactions"><span class="section-header-number">12</span> Transactions</a><ol class="toc"><li id="toc-li-64"><a href="text/ch022.xhtml#acid"><span class="section-header-number">12.1</span> ACID</a></li><li id="toc-li-65"><a href="text/ch022.xhtml#isolation"><span class="section-header-number">12.2</span> Isolation</a><ol class="toc"><li id="toc-li-66"><a href="text/ch022.xhtml#concurrency-control"><span class="section-header-number">12.2.1</span> Concurrency control</a></li></ol></li><li id="toc-li-67"><a href="text/ch022.xhtml#atomicity"><span class="section-header-number">12.3</span> Atomicity</a><ol class="toc"><li id="toc-li-68"><a href="text/ch022.xhtml#two-phase-commit"><span class="section-header-number">12.3.1</span> Two-phase commit</a></li></ol></li><li id="toc-li-69"><a href="text/ch022.xhtml#spanner"><span class="section-header-number">12.4</span> NewSQL</a></li></ol></li><li id="toc-li-70"><a href="text/ch023.xhtml#asynctransactions"><span class="section-header-number">13</span> Asynchronous transactions</a><ol class="toc"><li id="toc-li-71"><a href="text/ch023.xhtml#log-based-transactions"><span class="section-header-number">13.1</span> Outbox pattern</a></li><li id="toc-li-72"><a href="text/ch023.xhtml#sagas"><span class="section-header-number">13.2</span> Sagas</a></li><li id="toc-li-73"><a href="text/ch023.xhtml#isolation-1"><span class="section-header-number">13.3</span> Isolation</a></li></ol></li><li id="toc-li-74"><a href="text/ch024.xhtml#coordination-outro">Summary</a></li><li id="toc-li-75"><a href="text/ch025.xhtml#part-scalability">(PART) Scalability</a></li><li id="toc-li-76"><a href="text/ch026.xhtml#scalability-intro">Introduction</a></li><li id="toc-li-77"><a href="text/ch027.xhtml#httpcaching"><span class="section-header-number">14</span> HTTP caching</a><ol class="toc"><li id="toc-li-78"><a href="text/ch027.xhtml#reverse-proxies"><span class="section-header-number">14.1</span> Reverse proxies</a></li></ol></li><li id="toc-li-79"><a href="text/ch028.xhtml#cdn"><span class="section-header-number">15</span> Content delivery networks</a><ol class="toc"><li id="toc-li-80"><a href="text/ch028.xhtml#overlay-network"><span class="section-header-number">15.1</span> Overlay network</a></li><li id="toc-li-81"><a href="text/ch028.xhtml#caching"><span class="section-header-number">15.2</span> Caching</a></li></ol></li><li id="toc-li-82"><a href="text/ch029.xhtml#partitioning"><span class="section-header-number">16</span> Partitioning</a><ol class="toc"><li id="toc-li-83"><a href="text/ch029.xhtml#range-partitioning"><span class="section-header-number">16.1</span> Range partitioning</a></li><li id="toc-li-84"><a href="text/ch029.xhtml#hash-partitioning"><span class="section-header-number">16.2</span> Hash partitioning</a></li></ol></li><li id="toc-li-85"><a href="text/ch030.xhtml#filestorage"><span class="section-header-number">17</span> File storage</a><ol class="toc"><li id="toc-li-86"><a href="text/ch030.xhtml#blob-storage-architecture"><span class="section-header-number">17.1</span> Blob storage architecture</a></li></ol></li><li id="toc-li-87"><a href="text/ch031.xhtml#load-balancing"><span class="section-header-number">18</span> Network load balancing</a><ol class="toc"><li id="toc-li-88"><a href="text/ch031.xhtml#dns-load-balancing"><span class="section-header-number">18.1</span> DNS load balancing</a></li><li id="toc-li-89"><a href="text/ch031.xhtml#transport-layer-load-balancing"><span class="section-header-number">18.2</span> Transport layer load balancing</a></li><li id="toc-li-90"><a href="text/ch031.xhtml#l7lb"><span class="section-header-number">18.3</span> Application layer load balancing</a></li></ol></li><li id="toc-li-91"><a href="text/ch032.xhtml#datastorage"><span class="section-header-number">19</span> Data storage</a><ol class="toc"><li id="toc-li-92"><a href="text/ch032.xhtml#replication-1"><span class="section-header-number">19.1</span> Replication</a></li><li id="toc-li-93"><a href="text/ch032.xhtml#partitioning-1"><span class="section-header-number">19.2</span> Partitioning</a></li><li id="toc-li-94"><a href="text/ch032.xhtml#nosql"><span class="section-header-number">19.3</span> NoSQL</a></li></ol></li><li id="toc-li-95"><a href="text/ch033.xhtml#dbcaching"><span class="section-header-number">20</span> Caching</a><ol class="toc"><li id="toc-li-96"><a href="text/ch033.xhtml#policies"><span class="section-header-number">20.1</span> Policies</a></li><li id="toc-li-97"><a href="text/ch033.xhtml#local-cache"><span class="section-header-number">20.2</span> Local cache</a></li><li id="toc-li-98"><a href="text/ch033.xhtml#external-cache"><span class="section-header-number">20.3</span> External cache</a></li></ol></li><li id="toc-li-99"><a href="text/ch034.xhtml#microservices"><span class="section-header-number">21</span> Microservices</a><ol class="toc"><li id="toc-li-100"><a href="text/ch034.xhtml#caveats"><span class="section-header-number">21.1</span> Caveats</a></li><li id="toc-li-101"><a href="text/ch034.xhtml#apigw"><span class="section-header-number">21.2</span> API gateway</a><ol class="toc"><li id="toc-li-102"><a href="text/ch034.xhtml#core-responsibilities"><span class="section-header-number">21.2.1</span> Core responsibilities</a></li><li id="toc-li-103"><a href="text/ch034.xhtml#cross-cutting-concerns"><span class="section-header-number">21.2.2</span> Cross-cutting concerns</a></li><li id="toc-li-104"><a href="text/ch034.xhtml#caveats-1"><span class="section-header-number">21.2.3</span> Caveats</a></li></ol></li></ol></li><li id="toc-li-105"><a href="text/ch035.xhtml#controlplane"><span class="section-header-number">22</span> Control planes and data planes</a><ol class="toc"><li id="toc-li-106"><a href="text/ch035.xhtml#scale-imbalance"><span class="section-header-number">22.1</span> Scale imbalance</a></li><li id="toc-li-107"><a href="text/ch035.xhtml#controltheory"><span class="section-header-number">22.2</span> Control theory</a></li></ol></li><li id="toc-li-108"><a href="text/ch036.xhtml#messaging"><span class="section-header-number">23</span> Messaging</a><ol class="toc"><li id="toc-li-109"><a href="text/ch036.xhtml#guarantees"><span class="section-header-number">23.1</span> Guarantees</a></li><li id="toc-li-110"><a href="text/ch036.xhtml#exactly-once-processing"><span class="section-header-number">23.2</span> Exactly-once processing</a></li><li id="toc-li-111"><a href="text/ch036.xhtml#failures"><span class="section-header-number">23.3</span> Failures</a></li><li id="toc-li-112"><a href="text/ch036.xhtml#backlogs"><span class="section-header-number">23.4</span> Backlogs</a></li><li id="toc-li-113"><a href="text/ch036.xhtml#fault-isolation"><span class="section-header-number">23.5</span> Fault isolation</a></li></ol></li><li id="toc-li-114"><a href="text/ch037.xhtml#scalability-outro">Summary</a></li><li id="toc-li-115"><a href="text/ch038.xhtml#part-resiliency">(PART) Resiliency</a></li><li id="toc-li-116"><a href="text/ch039.xhtml#resiliency-intro">Introduction</a></li><li id="toc-li-117"><a href="text/ch040.xhtml#failure-causes"><span class="section-header-number">24</span> Common failure causes</a><ol class="toc"><li id="toc-li-118"><a href="text/ch040.xhtml#hardware-faults"><span class="section-header-number">24.1</span> Hardware faults</a></li><li id="toc-li-119"><a href="text/ch040.xhtml#incorrect-error-handling"><span class="section-header-number">24.2</span> Incorrect error handling</a></li><li id="toc-li-120"><a href="text/ch040.xhtml#configuration-changes"><span class="section-header-number">24.3</span> Configuration changes</a></li><li id="toc-li-121"><a href="text/ch040.xhtml#single-points-of-failure"><span class="section-header-number">24.4</span> Single points of failure</a></li><li id="toc-li-122"><a href="text/ch040.xhtml#network-faults"><span class="section-header-number">24.5</span> Network faults</a></li><li id="toc-li-123"><a href="text/ch040.xhtml#resource-leaks"><span class="section-header-number">24.6</span> Resource leaks</a></li><li id="toc-li-124"><a href="text/ch040.xhtml#load-pressure"><span class="section-header-number">24.7</span> Load pressure</a></li><li id="toc-li-125"><a href="text/ch040.xhtml#cascading-failures"><span class="section-header-number">24.8</span> Cascading failures</a></li><li id="toc-li-126"><a href="text/ch040.xhtml#managing-risk"><span class="section-header-number">24.9</span> Managing risk</a></li></ol></li><li id="toc-li-127"><a href="text/ch041.xhtml#redundancy"><span class="section-header-number">25</span> Redundancy</a><ol class="toc"><li id="toc-li-128"><a href="text/ch041.xhtml#correlation"><span class="section-header-number">25.1</span> Correlation</a></li></ol></li><li id="toc-li-129"><a href="text/ch042.xhtml#faultisolation"><span class="section-header-number">26</span> Fault isolation</a><ol class="toc"><li id="toc-li-130"><a href="text/ch042.xhtml#shuffle-sharding"><span class="section-header-number">26.1</span> Shuffle sharding</a></li><li id="toc-li-131"><a href="text/ch042.xhtml#cellarch"><span class="section-header-number">26.2</span> Cellular architecture</a></li></ol></li><li id="toc-li-132"><a href="text/ch043.xhtml#downstream-resiliency"><span class="section-header-number">27</span> Downstream resiliency</a><ol class="toc"><li id="toc-li-133"><a href="text/ch043.xhtml#timeout"><span class="section-header-number">27.1</span> Timeout</a></li><li id="toc-li-134"><a href="text/ch043.xhtml#retry"><span class="section-header-number">27.2</span> Retry</a><ol class="toc"><li id="toc-li-135"><a href="text/ch043.xhtml#exponential-backoff"><span class="section-header-number">27.2.1</span> Exponential backoff</a></li><li id="toc-li-136"><a href="text/ch043.xhtml#retry-amplification"><span class="section-header-number">27.2.2</span> Retry amplification</a></li></ol></li><li id="toc-li-137"><a href="text/ch043.xhtml#circuit-breaker"><span class="section-header-number">27.3</span> Circuit breaker</a></li></ol></li><li id="toc-li-138"><a href="text/ch044.xhtml#upstream-resiliency"><span class="section-header-number">28</span> Upstream resiliency</a><ol class="toc"><li id="toc-li-139"><a href="text/ch044.xhtml#load-shedding"><span class="section-header-number">28.1</span> Load shedding</a></li><li id="toc-li-140"><a href="text/ch044.xhtml#load-leveling"><span class="section-header-number">28.2</span> Load leveling</a></li><li id="toc-li-141"><a href="text/ch044.xhtml#ratelimiting"><span class="section-header-number">28.3</span> Rate-limiting</a><ol class="toc"><li id="toc-li-142"><a href="text/ch044.xhtml#single-process-implementation"><span class="section-header-number">28.3.1</span> Single-process implementation</a></li><li id="toc-li-143"><a href="text/ch044.xhtml#distributed-implementation"><span class="section-header-number">28.3.2</span> Distributed implementation</a></li></ol></li><li id="toc-li-144"><a href="text/ch044.xhtml#constantwork"><span class="section-header-number">28.4</span> Constant work</a></li></ol></li><li id="toc-li-145"><a href="text/ch045.xhtml#resiliency-outro">Summary</a></li><li id="toc-li-146"><a href="text/ch046.xhtml#part-maintainability">(PART) Maintainability</a></li><li id="toc-li-147"><a href="text/ch047.xhtml#operations-intro">Introduction</a></li><li id="toc-li-148"><a href="text/ch048.xhtml#testing"><span class="section-header-number">29</span> Testing</a><ol class="toc"><li id="toc-li-149"><a href="text/ch048.xhtml#scope"><span class="section-header-number">29.1</span> Scope</a></li><li id="toc-li-150"><a href="text/ch048.xhtml#size"><span class="section-header-number">29.2</span> Size</a></li><li id="toc-li-151"><a href="text/ch048.xhtml#practical-considerations-1"><span class="section-header-number">29.3</span> Practical considerations</a></li><li id="toc-li-152"><a href="text/ch048.xhtml#verification"><span class="section-header-number">29.4</span> Formal verification</a></li></ol></li><li id="toc-li-153"><a href="text/ch049.xhtml#cd"><span class="section-header-number">30</span> Continuous delivery and deployment</a><ol class="toc"><li id="toc-li-154"><a href="text/ch049.xhtml#review-and-build"><span class="section-header-number">30.1</span> Review and build</a></li><li id="toc-li-155"><a href="text/ch049.xhtml#pre-production"><span class="section-header-number">30.2</span> Pre-production</a></li><li id="toc-li-156"><a href="text/ch049.xhtml#production"><span class="section-header-number">30.3</span> Production</a></li><li id="toc-li-157"><a href="text/ch049.xhtml#rollbacks"><span class="section-header-number">30.4</span> Rollbacks</a></li></ol></li><li id="toc-li-158"><a href="text/ch050.xhtml#monitoring"><span class="section-header-number">31</span> Monitoring</a><ol class="toc"><li id="toc-li-159"><a href="text/ch050.xhtml#metrics"><span class="section-header-number">31.1</span> Metrics</a></li><li id="toc-li-160"><a href="text/ch050.xhtml#service-level-indicators"><span class="section-header-number">31.2</span> Service-level indicators</a></li><li id="toc-li-161"><a href="text/ch050.xhtml#service-level-objectives"><span class="section-header-number">31.3</span> Service-level objectives</a></li><li id="toc-li-162"><a href="text/ch050.xhtml#alerts"><span class="section-header-number">31.4</span> Alerts</a></li><li id="toc-li-163"><a href="text/ch050.xhtml#dashboards"><span class="section-header-number">31.5</span> Dashboards</a><ol class="toc"><li id="toc-li-164"><a href="text/ch050.xhtml#best-practices"><span class="section-header-number">31.5.1</span> Best practices</a></li></ol></li><li id="toc-li-165"><a href="text/ch050.xhtml#being-on-call"><span class="section-header-number">31.6</span> Being on call</a></li></ol></li><li id="toc-li-166"><a href="text/ch051.xhtml#observability"><span class="section-header-number">32</span> Observability</a><ol class="toc"><li id="toc-li-167"><a href="text/ch051.xhtml#logs"><span class="section-header-number">32.1</span> Logs</a></li><li id="toc-li-168"><a href="text/ch051.xhtml#traces"><span class="section-header-number">32.2</span> Traces</a></li><li id="toc-li-169"><a href="text/ch051.xhtml#putting-it-all-together"><span class="section-header-number">32.3</span> Putting it all together</a></li></ol></li><li id="toc-li-170"><a href="text/ch052.xhtml#manageability"><span class="section-header-number">33</span> Manageability</a></li><li id="toc-li-171"><a href="text/ch053.xhtml#maintainability-outro">Summary</a></li><li id="toc-li-172"><a href="text/ch054.xhtml#final-words"><span class="section-header-number">34</span> Final words</a></li></ol></nav>
<nav epub:type="landmarks" id="landmarks" hidden="hidden">
  <ol>
    <li>
      <a href="text/title_page.xhtml" epub:type="titlepage">Title Page</a>
    </li>
    <li>
      <a href="text/cover.xhtml" epub:type="cover">Cover</a>
    </li>
  </ol>
</nav>
</body>
</html>
